import{S as G,m as L,y,d as M,H as P,z as R,a as S,i as b,G as E,I as F,W as H,J as I,q as D}from"./three.module-FffQEkxT.js";import{g as T}from"./lil-gui.module.min-eVeCAemg.js";import{G as q}from"./GLTFLoader-DauaaqUj.js";import{d as z,g as B,h as U,$ as J,o as O,a as $}from"./index-2j7IQfhn.js";const Y=z({__name:"CartoonRobot",setup(j){const c={state:"Walking"},C=["Idle","Walking","Running","Dance","Death","Sitting","Standing"];let d,s,a,o,l;const g=B(),n=new G;n.background=new L(14737632),n.fog=new y(14737632,20,100);const p=new M(45,(window.innerWidth-200)/window.innerHeight,.25,100);p.position.set(-5,3,10),p.lookAt(0,2,0);const w=new P(16777215,9276813,3);w.position.set(0,20,0),n.add(w);const h=new R(16777215,3);h.position.set(0,20,10),n.add(h);const u=new S(new b(2e3,2e3),new E({color:13355979,depthWrite:!1}));u.rotation.x=-Math.PI/2,n.add(u);const m=new F(200,40,0,0);m.material.opacity=.2,m.material.transparent=!0,n.add(m);const r=new H({antialias:!0});r.setPixelRatio(window.devicePixelRatio),r.setSize(window.innerWidth-200,window.innerHeight);const W=new D;function k(){const t=W.getDelta();s&&s.update(t),requestAnimationFrame(k),r.render(n,p)}function _(t,e){d=new T,s=new I(t),a={};for(let f=0;f<e.length;f++){const v=e[f],A=s.clipAction(v);a[v.name]=A}const i=d.addFolder("状态");i.add(c,"state").options(C).onChange(function(){console.log("api",c),x(c.state,.5)}),i.open(),o=a.Walking,console.log("actions",a),o.play()}function x(t,e){l=o,o=a[t],l!==o&&l.fadeOut(e),o.reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(e).play()}return U(()=>{g.value.appendChild(r.domElement),new q().load("./models/RobotExpressive.glb",function(e){const i=e.scene;n.add(i),_(i,e.animations)}),k()}),J(()=>{d.hide()}),(t,e)=>(O(),$("div",{ref_key:"container",ref:g},null,512))}});export{Y as default};
